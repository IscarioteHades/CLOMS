from sub_code import insert
from sub_code import get_event
from sub_code import get_report
from datetime import datetime as dt
from sub_code import notice
from sub_code import some_function
from notice import send_line_notify

report_list = get_report.get_report_info()

# GoogleCalendarAPIを使うためのOAuth認証
service = insert.authorize()

events_start = get_event.get_event()

# GoogleCalendar に予定を送る
result = []
for class_name, deadline in report_list:
    # 重複して予定を登録しないため
    if deadline not in events_start:
        insert.set_event(class_name, deadline, service)
        result.append((class_name, deadline))

if result == []:
    print('新しく追加されたレポートはありません')
else:
    print('---新しく追加されたレポート---')
    for class_name, deadline in result:
        print('%s : %s' % (class_name, deadline))
        ('%s:%s' % (class_name, deadline))

# エントリーポイントの定義(GCPで使うやつ)
def handler(request):
    return clmos_system(request)
